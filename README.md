# Проект "Парсер вакансий"
После клонирования репозитория необходимо
1. Установить виртуальное окружение poetry.
2. Создать файл 'database.ini' в котором прописать настройки доступа к БД:
[postgresql]
host=localhost
user=postgres
password=пароль_пользователя_БД
port=5432

3. По необходимости скорректировать файл настроек config.
4. Запустить 'create_db_script' для первоначального создания БД и таблиц
   (при повторном запуске все таблицы БД перезаписываются пустыми).

Описание модулей проекта:
- 'api_hh' класс для работы с API hh содержит метод поиска работодателей по ключевому слову
 и метод получения всех вакансий работодателя по его id
- 'config' файл конфигурации содержит настройки имени БД и парсинг настроек доступа к БД
- 'database.ini' файл с настройками доступа к БД (необходимо создать самостоятельно)
- 'create_db_script' модуль для первоначального создания БД и таблиц
- 'create_db_script.sql' sql команды для первоначального создания таблиц
- 'db_manager' класс для работы с БД содержит методы записи данных в таблицы и методы получения 
 данных из таблиц
- 'main' точка входа в проект и модуль взаимодействия с пользователем через консоль

Реализация проекта:
Скрипт для создания БД и таблиц 'create_db_script'.
1. Проверяется наличие БД, если ее нет, то она создается.
2. Проверяется наличие таблиц employers и vacancies в БД. При отсутствии они создаются.
3. У пользователя запрашиваются названия компаний через запятую.
4. По АПИ получаются сведения об этих компаниях ('id', 'name', 'url'). Заполняются соответствующие поля
таблицы employers, если 'id' уже существует, то компания пропускается.
5. Создаются параметры запроса по АПИ для получения всех вакансий каждой найденной компании.
6. После получения всех вакансий они добавляются в таблицу 'vacancies', которая содержит следующие поля:
'alternate_url', 'area', 'published_at', 'employer', 'employment', 'experience', 'id', 'name', 
'salary_from', 'salary_to', 'requirement', 'responsibility' с проверкой по id и валидацией данных.
7. Пользователь может выбрать следующие методы:
get_companies_and_vacancies_count()
 — получает список всех компаний и количество вакансий у каждой компании.
get_all_vacancies()
 — получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
get_avg_salary()
 — получает среднюю зарплату по вакансиям.
get_vacancies_with_higher_salary()
 — получает список всех вакансий, у которых зарплата выше средней по всем вакансиям.
get_vacancies_with_keyword()
 — получает список всех вакансий, в названии и описании которых ('name', 'requirement') содержатся 
переданные в метод слова, например python.
